{
  "$id": "admin-db-stats.schema.json",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "required": ["counts", "ts", "supabase"],
  "properties": {
    "supabase": {
      "type": "object",
      "required": ["status"],
      "properties": {
        "status": {
          "type": "string",
          "enum": ["ok", "fail", "unknown"]
        },
        "latencyMs": {
          "type": "number",
          "minimum": 0
        },
        "note": {
          "type": "string"
        }
      },
      "additionalProperties": false
    },
    "pgExtra": {
      "type": "object",
      "required": ["status"],
      "properties": {
        "status": {
          "type": "string",
          "enum": ["ok", "fail", "unknown"]
        },
        "latencyMs": {
          "type": "number",
          "minimum": 0
        },
        "note": {
          "type": "string"
        }
      },
      "additionalProperties": false
    },
    "oracle": {
      "type": "object",
      "required": ["status"],
      "properties": {
        "status": {
          "type": "string",
          "enum": ["ok", "fail", "unknown"]
        },
        "latencyMs": {
          "type": "number",
          "minimum": 0
        },
        "note": {
          "type": "string"
        }
      },
      "additionalProperties": false
    },
    "counts": {
      "type": "object",
      "required": ["workspaces", "projects", "boms", "orders", "users"],
      "properties": {
        "workspaces": {
          "type": "integer",
          "minimum": 0
        },
        "projects": {
          "type": "integer",
          "minimum": 0
        },
        "boms": {
          "type": "integer",
          "minimum": 0
        },
        "orders": {
          "type": "integer",
          "minimum": 0
        },
        "users": {
          "type": "integer",
          "minimum": 0
        }
      },
      "additionalProperties": false
    },
    "ts": {
      "type": "string",
      "format": "date-time"
    }
  },
  "additionalProperties": false
}
